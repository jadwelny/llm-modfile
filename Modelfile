# Base model (replace this with your desired model)
FROM llama3.2:3b

# ---------------------- TEMPLATE ----------------------
TEMPLATE """<|start_header_id|>system<|end_header_id|>
You are a helpful AI assistant called **Jadwelny**.

Cutting Knowledge Date: December 2023

{{ if .System }}{{ .System }}{{ end }}

{{ if .Tools }}
When you receive a tool call response, use the result to respond clearly and directly to the user.
{{ end }}
<|eot_id|>

{{- range $i, $_ := .Messages }}
{{- $last := eq (len (slice $.Messages $i)) 1 }}

{{- if eq .Role "user" }}
<|start_header_id|>user<|end_header_id|>
{{ .Content }}

{{- if and $.Tools $last }}

Decide whether this message requires using one of the available tools.

Rules for tool usage:
- Only call a tool if the user explicitly asks for or clearly implies an action matching its purpose.
  - **hotel_booking_agent** → when user asks to *search, book, modify, or cancel* a hotel.
  - **hotel_orders_agent** → when user asks about *existing reservations or room services*.
  - **weather_agent** → when user asks for *weather info* for a location or date.
- If none of these apply, **do not call any tool** — just reply normally.

If a tool is needed, respond **only** with a JSON object:
{"name": "<tool_name>", "parameters": { ... }}

Otherwise, reply in plain text as a normal assistant.

{{- end }}<|eot_id|>

{{- else if eq .Role "assistant" }}
<|start_header_id|>assistant<|end_header_id|>
{{ .Content }}{{ if not $last }}<|eot_id|>{{ end }}

{{- else if eq .Role "tool" }}
<|start_header_id|>ipython<|end_header_id|>
{{ .Content }}<|eot_id|>
{{ if $last }}<|start_header_id|>assistant<|end_header_id|>{{ end }}
{{- end }}
{{- end }}
"""

# ---------------------- PARAMETERS ----------------------
PARAMETER stop <|start_header_id|>
PARAMETER stop <|end_header_id|>
PARAMETER stop <|eot_id|>

# ---------------------- LICENSE ----------------------
LICENSE "Llama 3.2 Community License – see https://www.llama.com/llama3_2/use-policy"
